<!DOCTYPE html>
<html lang='zh-CN'>

<head>
    <meta charset='utf-8'>
    <title>nospace5</title>
    <link rel="stylesheet" href="../main.css">
</head>

<body>
    <div id='box'>
        <ul>
            <li style="background: red">1</li>
            <li style="background: blue">2</li>
            <li style="background: yellow">3</li>
            <li style="background: #465">4</li>
            <li style="background: green">5</li>
            <li style="background: red">1</li>
        </ul>
    </div>
    <p id='p'></p>
    <script>
    // 获取元素
    var box = document.getElementById('box');
    var ul = box.children[0];
    var lis = ul.children;
    var liW = lis[0].offsetWidth;
    var ulX = ul.offsetLeft;
    var timer;
    var count = 1;

    function move(elem, step, json) {
        clearInterval(elem.timer);
        elem.timer = setInterval(function() {
            for (var attr in json) {
                var currentValue = parseFloat(getComputedStyle(elem, null)[attr]);
                step = (json[attr] > currentValue) ? Math.abs(step) : -Math.abs(step);
                elem.style[attr] = currentValue + step + 'px';
                var result = Math.abs(json[attr] - currentValue);
                // 这里对比的是绝对值
                if (result <= Math.abs(step)) {
                    elem.style[attr] = json[attr] + 'px';
                    clearInterval(elem.timer);
                }
            }
        }, 30);
    };

    function autoplay() {
        if (Math.abs(ul.offsetLeft) >= liW * (lis.length - 1)) {
            ul.style.left = 0;
            count = 1;
        }
        move(ul, liW / 10, {
            left: -liW * count + ulX
        });
        count++;
    }

    timer = setInterval(autoplay, 1000);

    // 开启、关闭
    box.addEventListener('mouseover', function() {
        clearInterval(timer);
    });
    box.addEventListener('mouseout', function() {
        timer = setInterval(autoplay, 1000);
    });

    // 计时器
    var p = document.getElementById('p');
    setInterval(function() {
        p.innerHTML = new Date().getSeconds();
    }, 1000);
    </script>
</body>

</html>
